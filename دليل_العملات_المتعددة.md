# دليل العملات المتعددة - نظام خدمات ما بعد البيع

## 💱 **العملات المدعومة:**

النظام يدعم الآن عملتين رئيسيتين:

### **1️⃣ الليرة السورية (SYP)**
- **الرمز**: `ل.س`
- **الاسم**: الليرة السورية
- **التنسيق**: `50,000 ل.س`
- **العملة الافتراضية**

### **2️⃣ الدولار الأمريكي (USD)**
- **الرمز**: `$`
- **الاسم**: الدولار الأمريكي
- **التنسيق**: `$1,234.56`
- **عملة دولية**

---

## 🔄 **كيفية تغيير العملة:**

### **من الواجهة:**
1. **في الشريط العلوي** - ابحث عن قائمة العملة
2. **اختر العملة المطلوبة** من القائمة المنسدلة
3. **التغيير فوري** - جميع الأسعار ستتحدث مباشرة

### **تخزين الاختيار:**
- ✅ **محفوظ محلياً** - اختيارك محفوظ في المتصفح
- ✅ **تذكر الاختيار** - سيبقى اختيارك عند العودة للموقع
- ✅ **لكل مستخدم** - كل مستخدم له اختياره الخاص

---

## 💰 **إضافة التكاليف:**

### **العملة التلقائية:**
- عند إضافة تكلفة جديدة، ستستخدم **العملة المختارة حالياً**
- **مثال**: إذا اخترت الدولار، ستكون التكلفة بالدولار

### **عرض التكاليف المختلطة:**
- يمكن أن يحتوي الطلب الواحد على تكاليف بعملات مختلفة
- **مثال**: 
  - تكلفة 1: `50,000 ل.س` (قطع غيار)
  - تكلفة 2: `$25.00` (عمالة)

### **التحويل:**
- **لا يوجد تحويل تلقائي** - كل تكلفة تظهر بعملتها الأصلية
- المستخدم مسؤول عن حساب المجموع النهائي

---

## 🎯 **أمثلة عملية:**

### **سيناريو 1: شركة تعمل بالليرة السورية**
```
1. اختيار العملة: ل.س
2. إضافة تكلفة قطع غيار: 75,000 ل.س
3. إضافة تكلفة عمالة: 25,000 ل.س
4. المجموع: 100,000 ل.س
```

### **سيناريو 2: شركة تعمل بالدولار**
```
1. اختيار العملة: $
2. إضافة تكلفة قطع غيار: $45.50
3. إضافة تكلفة عمالة: $20.00
4. المجموع: $65.50
```

### **سيناريو 3: عملات مختلطة**
```
1. تكلفة محلية بالليرة: 50,000 ل.س
2. تكلفة مستوردة بالدولار: $15.00
3. عرض منفصل لكل عملة
```

---

## 🛠️ **للمطورين:**

### **استخدام دوال العملة:**
```typescript
import { formatCurrency, getCurrentCurrency, setCurrentCurrency } from '../utils/currency';

// تنسيق مبلغ بالعملة الحالية
const formatted = formatCurrency(1234.56); // "$1,234.56" أو "1,235 ل.س"

// تنسيق مبلغ بعملة محددة
const usdFormatted = formatCurrency(100, 'USD'); // "$100.00"
const sypFormatted = formatCurrency(50000, 'SYP'); // "50,000 ل.س"

// الحصول على العملة الحالية
const current = getCurrentCurrency(); // 'SYP' أو 'USD'

// تغيير العملة
setCurrentCurrency('USD');
```

### **مكون اختيار العملة:**
```typescript
import CurrencySelector from '../components/common/CurrencySelector';

// استخدام مع تسمية
<CurrencySelector showLabel={true} />

// استخدام بدون تسمية
<CurrencySelector showLabel={false} />
```

### **Hook العملة:**
```typescript
import { useCurrency } from '../hooks/useCurrency';

const { currentCurrency, formatCurrency, getCurrencySymbol } = useCurrency();
```

---

## 📊 **تأثير على التقارير:**

### **التقارير المالية:**
- **تفصيل بالعملة** - التقارير تظهر التكاليف مفصلة حسب العملة
- **لا يوجد جمع تلقائي** - المجاميع منفصلة لكل عملة
- **وضوح في العرض** - كل تكلفة تظهر بعملتها الأصلية

### **مثال تقرير:**
```
إجمالي التكاليف:
- بالليرة السورية: 150,000 ل.س
- بالدولار الأمريكي: $85.50
```

---

## ⚙️ **الإعدادات الفنية:**

### **قاعدة البيانات:**
- ✅ **حقل العملة** مضاف لجدول `request_costs`
- ✅ **العملة المفضلة** للمستخدمين في جدول `users`
- ✅ **القيم الافتراضية** - SYP للتوافق مع البيانات الموجودة

### **التخزين المحلي:**
- ✅ **localStorage** - اختيار العملة محفوظ محلياً
- ✅ **إعادة تحميل** - الاختيار يبقى عند إعادة فتح الموقع

### **التحديث الفوري:**
- ✅ **Events** - النظام يرسل إشعار عند تغيير العملة
- ✅ **Re-render** - المكونات تتحدث فوراً
- ✅ **Consistency** - جميع الأسعار تتحدث معاً

---

## 🔮 **التطوير المستقبلي:**

### **ميزات مخططة:**
- [ ] **المزيد من العملات** - يورو، جنيه استرليني، إلخ
- [ ] **أسعار الصرف** - تحويل تلقائي بين العملات
- [ ] **تقارير موحدة** - جمع التكاليف بعملة واحدة
- [ ] **رسوم بيانية** - تحليل التكاليف بالعملات المختلفة

### **إضافة عملة جديدة:**
```typescript
// في ملف currency.ts
export const CURRENCIES: Record<CurrencyCode, Currency> = {
  SYP: { /* ... */ },
  USD: { /* ... */ },
  EUR: {  // عملة جديدة
    code: 'EUR',
    symbol: '€',
    name: 'Euro',
    nameAr: 'اليورو',
    locale: 'de-DE'
  }
};
```

---

## 📝 **نصائح للاستخدام:**

### **للمديرين:**
- **وضع سياسة واضحة** - حدد العملة الأساسية للشركة
- **تدريب الموظفين** - على استخدام العملات المختلفة
- **مراجعة دورية** - للتكاليف بالعملات المختلفة

### **للفنيين:**
- **انتبه للعملة** - قبل إضافة أي تكلفة
- **تأكد من الصحة** - العملة المختارة تناسب التكلفة
- **استشر المشرف** - في حالة الشك

### **للمحاسبين:**
- **فصل العملات** - في الحسابات والتقارير
- **تتبع أسعار الصرف** - للتحويل اليدوي عند الحاجة
- **توثيق واضح** - لجميع المعاملات

---

## 🚀 **البدء السريع:**

1. **افتح النظام** في المتصفح
2. **ابحث عن قائمة العملة** في الشريط العلوي
3. **اختر العملة المطلوبة** (ل.س أو $)
4. **ابدأ بإضافة التكاليف** - ستكون بالعملة المختارة
5. **غير العملة** في أي وقت حسب الحاجة

---

**🎉 استمتع بالمرونة في استخدام العملات المتعددة! 💱**
